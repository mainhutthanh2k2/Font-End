{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Applications = void 0;\nconst server_client_1 = require(\"@vonage/server-client\");\nconst apiToApplication = response => {\n  delete response?._links;\n  return server_client_1.Client.transformers.camelCaseObjectKeys(response, true, true);\n};\nclass Applications extends server_client_1.Client {\n  authType = server_client_1.AuthenticationType.BASIC;\n  async listApplications(filter) {\n    return this.getApplicationPage(filter);\n  }\n  async *listAllApplications(params = {}) {\n    let next = null;\n    params.page = params?.page || 1;\n    do {\n      const resp = await this.getApplicationPage(params);\n      yield* resp._embedded?.applications;\n      next = resp._links?.next;\n      params.page++;\n    } while (next);\n  }\n  async getApplicationPage(filter) {\n    const resp = await this.sendGetRequest(`${this.config.apiHost}/v2/applications`, server_client_1.Client.transformers.snakeCaseObjectKeys(filter));\n    if (resp.data._embedded?.applications) {\n      resp.data._embedded.applications = resp.data._embedded.applications.map(apiToApplication);\n    }\n    return {\n      ...resp.data,\n      totalItems: resp.data.total_items,\n      totalPages: resp.data.total_pages,\n      pageSize: resp.data.page_size\n    };\n  }\n  async createApplication(application) {\n    const resp = await this.sendPostRequest(`${this.config.apiHost}/v2/applications`, server_client_1.Client.transformers.snakeCaseObjectKeys(application, true));\n    return apiToApplication(resp.data);\n  }\n  async getApplication(applicationId) {\n    const resp = await this.sendGetRequest(`${this.config.apiHost}/v2/applications/${applicationId}`);\n    return apiToApplication(resp.data);\n  }\n  async updateApplication(application) {\n    const resp = await this.sendPutRequest(`${this.config.apiHost}/v2/applications/${application.id}`, server_client_1.Client.transformers.snakeCaseObjectKeys(application, true));\n    return apiToApplication(resp.data);\n  }\n  async deleteApplication(applicationId) {\n    await this.sendDeleteRequest(`${this.config.apiHost}/v2/applications/${applicationId}`);\n  }\n}\nexports.Applications = Applications;","map":{"version":3,"names":["server_client_1","require","apiToApplication","response","_links","Client","transformers","camelCaseObjectKeys","Applications","authType","AuthenticationType","BASIC","listApplications","filter","getApplicationPage","listAllApplications","params","next","page","resp","_embedded","applications","sendGetRequest","config","apiHost","snakeCaseObjectKeys","data","map","totalItems","total_items","totalPages","total_pages","pageSize","page_size","createApplication","application","sendPostRequest","getApplication","applicationId","updateApplication","sendPutRequest","id","deleteApplication","sendDeleteRequest","exports"],"sources":["../lib/applications.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}