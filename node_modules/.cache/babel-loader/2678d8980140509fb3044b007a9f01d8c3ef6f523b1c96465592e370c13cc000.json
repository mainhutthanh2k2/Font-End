{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Verify = void 0;\nconst server_client_1 = require(\"@vonage/server-client\");\nconst index_1 = require(\"./enums/index\");\nconst lodash_omit_1 = __importDefault(require(\"lodash.omit\"));\nclass Verify extends server_client_1.Client {\n  async sendControl(command, requestId) {\n    const data = {\n      request_id: requestId,\n      cmd: index_1.Command.CANCEL\n    };\n    // eslint-disable-next-line max-len\n    const resp = await this.sendPostRequest(`${this.config.apiHost}/verify/control/json`, data);\n    return server_client_1.Client.transformers.camelCaseObjectKeys(resp.data, true, true);\n  }\n  async cancel(requestId) {\n    return this.sendControl(index_1.Command.CANCEL, requestId);\n  }\n  async trigger(requestId) {\n    return this.sendControl(index_1.Command.TRIGGER_NEXT_EVENT, requestId);\n  }\n  async check(requestId, code) {\n    // eslint-disable-next-line max-len\n    const resp = await this.sendPostRequest(`${this.config.apiHost}/verify/check/json`, {\n      request_id: requestId,\n      code: code\n    });\n    return server_client_1.Client.transformers.camelCaseObjectKeys(resp.data, true, true);\n  }\n  async search(requestId) {\n    const resp = await this.sendGetRequest(`${this.config.apiHost}/verify/search/json`, {\n      request_id: requestId\n    });\n    return server_client_1.Client.transformers.camelCaseObjectKeys(resp.data, true, true);\n  }\n  async start(request) {\n    const url = 'brand' in request ? `${this.config.apiHost}/verify/json` : `${this.config.apiHost}/verify/psd2/json`;\n    const resp = await this.sendPostRequest(url, server_client_1.Client.transformers.snakeCaseObjectKeys((0, lodash_omit_1.default)(request, ['language'])));\n    return server_client_1.Client.transformers.camelCaseObjectKeys(resp.data, true, true);\n  }\n}\nexports.Verify = Verify;","map":{"version":3,"names":["server_client_1","require","index_1","lodash_omit_1","__importDefault","Verify","Client","sendControl","command","requestId","data","request_id","cmd","Command","CANCEL","resp","sendPostRequest","config","apiHost","transformers","camelCaseObjectKeys","cancel","trigger","TRIGGER_NEXT_EVENT","check","code","search","sendGetRequest","start","request","url","snakeCaseObjectKeys","default","exports"],"sources":["../lib/verify.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,OAAA,GAAAD,OAAA;AAkBA,MAAAE,aAAA,GAAAC,eAAA,CAAAH,OAAA;AAEA,MAAaI,MAAO,SAAQL,eAAA,CAAAM,MAAM;EACzB,MAAMC,WAAWA,CACtBC,OAAgB,EAChBC,SAAiB;IAEjB,MAAMC,IAAI,GAAG;MACXC,UAAU,EAAEF,SAAS;MACrBG,GAAG,EAAEV,OAAA,CAAAW,OAAO,CAACC;KACd;IAED;IACA,MAAMC,IAAI,GAAG,MAAM,IAAI,CAACC,eAAe,CAEjC,GAAG,IAAI,CAACC,MAAM,CAACC,OAAO,sBAAsB,EAAER,IAAI,CAAC;IACzD,OAAOV,eAAA,CAAAM,MAAM,CAACa,YAAY,CAACC,mBAAmB,CAACL,IAAI,CAACL,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;EACvE;EAEO,MAAMW,MAAMA,CACjBZ,SAAiB;IAEjB,OAAO,IAAI,CAACF,WAAW,CAACL,OAAA,CAAAW,OAAO,CAACC,MAAM,EAAEL,SAAS,CAAC;EACpD;EAEO,MAAMa,OAAOA,CAClBb,SAAiB;IAEjB,OAAO,IAAI,CAACF,WAAW,CAACL,OAAA,CAAAW,OAAO,CAACU,kBAAkB,EAAEd,SAAS,CAAC;EAChE;EAEO,MAAMe,KAAKA,CAChBf,SAAiB,EACjBgB,IAAY;IAEZ;IACA,MAAMV,IAAI,GAAG,MAAM,IAAI,CAACC,eAAe,CAEjC,GAAG,IAAI,CAACC,MAAM,CAACC,OAAO,oBAAoB,EAAE;MAC5CP,UAAU,EAAEF,SAAS;MACrBgB,IAAI,EAAEA;KACP,CAAC;IAEN,OAAOzB,eAAA,CAAAM,MAAM,CAACa,YAAY,CAACC,mBAAmB,CAACL,IAAI,CAACL,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;EACvE;EAEO,MAAMgB,MAAMA,CACjBjB,SAAiB;IAEjB,MAAMM,IAAI,GAAG,MAAM,IAAI,CAACY,cAAc,CACpC,GAAG,IAAI,CAACV,MAAM,CAACC,OAAO,qBAAqB,EAC3C;MAAEP,UAAU,EAAEF;IAAS,CAAE,CAC1B;IAED,OAAOT,eAAA,CAAAM,MAAM,CAACa,YAAY,CAACC,mBAAmB,CAACL,IAAI,CAACL,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;EACvE;EAEO,MAAMkB,KAAKA,CAChBC,OAAgD;IAEhD,MAAMC,GAAG,GACC,OAAO,IAAID,OAAO,GAChB,GAAG,IAAI,CAACZ,MAAM,CAACC,OAAO,cAAc,GACpC,GAAG,IAAI,CAACD,MAAM,CAACC,OAAO,mBAAmB;IAErD,MAAMH,IAAI,GAAG,MAAM,IAAI,CAACC,eAAe,CACrCc,GAAG,EACH9B,eAAA,CAAAM,MAAM,CAACa,YAAY,CAACY,mBAAmB,CAAC,IAAA5B,aAAA,CAAA6B,OAAI,EAACH,OAAO,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CACrE;IAED,OAAO7B,eAAA,CAAAM,MAAM,CAACa,YAAY,CAACC,mBAAmB,CAACL,IAAI,CAACL,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;EACvE;;AArEFuB,OAAA,CAAA5B,MAAA,GAAAA,MAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}