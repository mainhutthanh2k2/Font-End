{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FileClient = void 0;\nconst client_1 = require(\"./client\");\nconst AuthenticationType_1 = require(\"./enums/AuthenticationType\");\nconst fs_1 = require(\"fs\");\nconst debug_1 = __importDefault(require(\"debug\"));\nconst log = (0, debug_1.default)('vonage:server-client');\nclass FileClient extends client_1.Client {\n  authType = AuthenticationType_1.AuthenticationType.JWT;\n  async downloadFile(file, path) {\n    log(`Downloading file: ${file}`);\n    let fileId = file;\n    try {\n      const fileURL = new URL(file);\n      fileId = fileURL.pathname.split('/').pop();\n    } catch (_) {\n      log(`Not a url`);\n    }\n    log(`File Id ${fileId}`);\n    const resp = await this.sendGetRequest(`${this.config.apiHost}/v1/files/${fileId}`);\n    log(`Saving to ${path}`);\n    (0, fs_1.writeFileSync)(path, resp.data);\n    log('File saved');\n  }\n}\nexports.FileClient = FileClient;","map":{"version":3,"names":["client_1","require","AuthenticationType_1","fs_1","debug_1","__importDefault","log","default","FileClient","Client","authType","AuthenticationType","JWT","downloadFile","file","path","fileId","fileURL","URL","pathname","split","pop","_","resp","sendGetRequest","config","apiHost","writeFileSync","data","exports"],"sources":["../lib/fileClient.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;AAAA,MAAAA,QAAA,GAAAC,OAAA;AACA,MAAAC,oBAAA,GAAAD,OAAA;AACA,MAAAE,IAAA,GAAAF,OAAA;AACA,MAAAG,OAAA,GAAAC,eAAA,CAAAJ,OAAA;AAEA,MAAMK,GAAG,GAAG,IAAAF,OAAA,CAAAG,OAAK,EAAC,sBAAsB,CAAC;AAEzC,MAAaC,UAAW,SAAQR,QAAA,CAAAS,MAAM;EAC1BC,QAAQ,GAAGR,oBAAA,CAAAS,kBAAkB,CAACC,GAAG;EAE3C,MAAMC,YAAYA,CAACC,IAAY,EAAEC,IAAY;IAC3CT,GAAG,CAAC,qBAAqBQ,IAAI,EAAE,CAAC;IAChC,IAAIE,MAAM,GAAGF,IAAI;IACjB,IAAI;MACF,MAAMG,OAAO,GAAG,IAAIC,GAAG,CAACJ,IAAI,CAAC;MAC7BE,MAAM,GAAGC,OAAO,CAACE,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,EAAE;KAC3C,CAAC,OAAOC,CAAC,EAAE;MACVhB,GAAG,CAAC,WAAW,CAAC;;IAGlBA,GAAG,CAAC,WAAWU,MAAM,EAAE,CAAC;IACxB,MAAMO,IAAI,GAAG,MAAM,IAAI,CAACC,cAAc,CACpC,GAAG,IAAI,CAACC,MAAM,CAACC,OAAO,aAAaV,MAAM,EAAE,CAC5C;IAEDV,GAAG,CAAC,aAAaS,IAAI,EAAE,CAAC;IACxB,IAAAZ,IAAA,CAAAwB,aAAa,EAACZ,IAAI,EAAEQ,IAAI,CAACK,IAAI,CAAC;IAC9BtB,GAAG,CAAC,YAAY,CAAC;EACnB;;AArBFuB,OAAA,CAAArB,UAAA,GAAAA,UAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}